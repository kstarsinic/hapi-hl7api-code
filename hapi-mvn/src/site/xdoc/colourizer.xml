<html>

<body>

<script type="text/javascript">
	function update() {
		
		var value = document.getElementById('ta').value;

		var lines = value.split("\n");
		var output = "";
		for (var index in lines) {
			var nextLine = lines[index];
			if (nextLine.length < 3) {
				output = output + nextLine + "<br>";
				continue;
			}
			
			var fields = nextLine.split("|");
			for (var fIndex in fields) {
				var nextField = fields[fIndex];
				if (fIndex == 0) {
					output = output + "<span style=\"color: #000080;\"><b>" + nextField + "</b></span>";
				} else {
					
					var reps = nextField.split("~");
					for (var rIndex in reps) {
						var nextRep = reps[rIndex];
						
						if (rIndex > 0) {
							output = output + "<span style=\"color: #808080;\">~</span>";
						}

						var comps = nextRep.split("^");
						for (var cIndex in comps) {
							var nextComp = comps[cIndex];

							if (cIndex > 0) {
								output = output + "<span style=\"color: #808080;\">^</span>";
							}

							var subcomps = nextComp.split("&");
							for (var sIndex in subcomps) {
								var nextSubComp = subcomps[sIndex];
								
								if (sIndex > 0) {
									output = output + "<span style=\"color: #808080;\">&</span>";
								}
								
								if (nextSubComp.match(/^[0-9./]+/)) {
									nextSubComp = "<span style=\"color: #006020;\">" + nextSubComp + "</span>";
								}
								
								output = output + nextSubComp;
								
							}
						}
					}
				}
				
				output = output + "<span style=\"color: #808080;\"><b>|</b></span>";
				
			}
			
			output = output + "<br>";
		}
		
		document.getElementById('out').innerHTML = output;
		//window.alert(value);
		
	}
</script>

	<textarea id="ta" style="width: 95%; height: 100px;"></textarea>
	<br>
	<input type="button" value="Convert" onclick="update();"/>

	<br><br>
	
	<div id="out" style="border: 1px solid #808080; font-family: monospace;"></div>
	
	
</body>
</html>